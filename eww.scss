$button-bg: rgba(128, 128, 128, 0.4);
$button-bg-hover: rgba(115, 115, 115, 0.4);

$theme: "tokyo-night";

$themes: (
  "tokyo-night": (
    "border-radius": 9px,
    "background": #1a1b26,
    "background-opacity": 1,
    "background-light": #24283b,
    "text": #c0caf5,
    "btn": #24283b,
    "btn-opacity": 1,
    "btn-hover": #414868,
    "btn-hover-opacity": 1,
    "app-menu-icon": #2ac3de,
    "text-hover": #f7768e,
    "workspace-hover": #9aa5ce,
    "notification-bg": #24283b,
    "notification-opacity": 1,
    "notification-low": #9aa5ce,
    "notification-normal": #73daca,
    "notification-critical": #f7768e,
    "notification-border-size": 0,
    "notification-btn": #414868,
    "notification-btn-hover": #565f89,
    "notification-dismiss": #f7768e,
    "slider-trough": #414868,
    "slider-highlight": #7dcfff,
  ),
);

@function get-value($value) {
  @return map-get(map-get($themes, $theme), $value);
}

@mixin background-opacity($color, $opacity) {
  background-color: rgba($color, $opacity);
}

* {
  all: unset;
  color: get-value("text");
}

.section {
  @include background-opacity(
    get-value("background"),
    get-value("background-opacity")
  );
  border-radius: get-value("border-radius");
  padding: 0 10px;
}

.btn {
  border-radius: get-value("border-radius");

  &:hover {
    @include background-opacity(
      get-value("btn-hover"),
      get-value("btn-hover-opacity")
    );
  }
}

.bar {
  font-family: SF Pro Rounded;
  font-weight: 500;
  font-size: 0.9em;
  margin: 10px;
  margin-bottom: 0;
}

.icon {
  font-family: Segoe Fluent Icons;
}

.app-menu {
  font-size: 1.4em;

  label {
    transition: color 500ms;
  }

  &:hover {
    label {
      color: get-value("app-menu-icon");
    }
  }
}

.text-btn {
  &:hover {
    label {
      color: get-value("text-hover");
    }
  }
}

.workspaces {
  .workspace-btn {
    transition: color 500ms;

    label {
      font-size: 1.2em;
      margin: 0 4px;
    }

    &:hover {
      label {
        color: get-value("workspace-hover");
      }
    }
  }
}

.volume {
  .volume-icon {
    font-size: 1.2em;
  }
}

.network {
  .wifi-icon {
    font-size: 1.3em;
  }
}

.text-bold {
  font-weight: 600;
}

.widgets {
  margin-top: 10px;
  margin-right: 10px;
  margin-bottom: 48px;

  .widget {
    @include background-opacity(
      get-value("background-light"),
      get-value("background-opacity")
    );

    padding: 14px;
    border-radius: get-value("border-radius");
  }
}

.system-menu {
  margin: 10px;
  margin-top: 0;
  @include background-opacity(
    get-value("background-light"),
    get-value("background-opacity")
  );
  border-radius: get-value("border-radius");

  .system-menu-section {
    border-bottom: 1px solid #777;

    &:last-child {
      border: none;
    }

    .system-menu-button {
      padding: 0.2em 0.5em;

      label {
        margin: 0.2em 1em;
        padding: 0.1em 0;
      }

      &:hover {
        @include background-opacity(
          get-value("btn-hover"),
          get-value("btn-hover-opacity")
        );
        border-radius: get-value("border-radius");
      }
    }
  }
}

.notifications-indicator {
  font-size: 2em;
}

.notification-list {
  .notification-list-header {
    margin-bottom: 10px;

    .notification-list-header-label {
      font-size: 1.2em;
      font-weight: 600;
    }

    .notification-clear {
      @include background-opacity(get-value("btn"), get-value("btn-opacity"));
      border-radius: get-value("border-radius");

      box {
        padding: 0.4em 1em;
      }

      &:hover {
        @include background-opacity(
          get-value("btn-hover"),
          get-value("btn-hover-opacity")
        );
      }
    }
  }

  .notification-list-expand-button {
    label {
      padding: 0.4em 0.5em;
      @include background-opacity(get-value("btn"), get-value("btn-opacity"));
      border-radius: get-value("border-radius");
    }

    &:hover label {
      @include background-opacity(
        get-value("btn-hover"),
        get-value("btn-hover-opacity")
      );
    }
  }

  .notification-group {
    .notification-group-header {
      .notification-group-name {
        font-size: 1.2em;
        font-weight: 600;
      }

      .notification-group-collapse-btn {
        box {
          padding: 0.4em 0.5em;
          @include background-opacity(
            get-value("btn"),
            get-value("btn-opacity")
          );
          border-radius: get-value("border-radius");
        }

        &:hover box {
          @include background-opacity(
            get-value("btn-hover"),
            get-value("btn-hover-opacity")
          );
        }
      }
    }

    .notification-group-expand-button-box {
      margin-top: 10px;

      .notification-group-expand-button {
        label {
          padding: 0.4em 1em;
          @include background-opacity(
            get-value("notification-btn"),
            get-value("btn-opacity")
          );
          border-radius: get-value("border-radius");
        }

        &:hover label {
          @include background-opacity(
            get-value("notification-btn-hover"),
            get-value("btn-hover-opacity")
          );
        }
      }
    }

    .notification-group-expanded {
      margin-bottom: 10px;
    }
  }
}

.notification-popups {
  margin-top: 10px;
  margin-right: 10px;
}

.notification-dismiss {
  @include background-opacity(get-value("btn"), get-value("btn-opacity"));
  border-radius: 999px;

  &:hover label {
      color: get-value("notification-dismiss");
  }
}

.notification {
  border-radius: get-value("border-radius");
  padding: 0.75em;

  &.notification-low {
    @include background-opacity(
      get-value("notification-bg"),
      get-value("notification-opacity")
    );
    border: get-value("notification-border-size") solid
      get-value("notification-low");
  }

  &.notification-normal {
    @include background-opacity(
      get-value("notification-bg"),
      get-value("notification-opacity")
    );
    border: get-value("notification-border-size") solid
      get-value("notification-normal");
  }

  &.notification-critical {
    @include background-opacity(
      get-value("notification-bg"),
      get-value("notification-opacity")
    );
    border: get-value("notification-border-size") solid
      get-value("notification-critical");
  }

  .notification-container {
    .notification-summary {
      font-weight: 600;
    }
  }

  .notification-action-button-box {
    margin-top: 10px;

    .notification-action-button {
      @include background-opacity(
        get-value("notification-btn"),
        get-value("btn-opacity")
      );
      border-radius: get-value("border-radius");
      font-weight: 500;

      &:hover {
        @include background-opacity(
          get-value("notification-btn-hover"),
          get-value("btn-hover-opacity")
        );
      }

      label {
        padding: 0.25em;
      }
    }
  }
}

.control-center {
  margin-top: 5px;

  .sound-box {
    padding: 15px;
    @include background-opacity(
      get-value("background-light"),
      get-value("background-opacity")
    );
    border-radius: get-value("border-radius");

    .volume-slider {
      trough {
        background-color: get-value("slider-trough");
        border-radius: 50px;
        min-height: 8px;

        highlight {
          background-color: get-value("slider-highlight");
          border-radius: get-value("border-radius");
        }
      }
    }
  }
}
